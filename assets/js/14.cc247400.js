(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{517:function(e,a,s){"use strict";s.r(a);var r=s(6),t=Object(r.a)({},function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("最近没有时间好久没有写文章了，今天由于需要安装docker学习虚拟容器的知识，需要升级OS的内核。目前我这边使用的OS是centos6.5，内核是2.6版本的，如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("cat /etc/issue\nuname -r\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("因为docker的使用需要3.0以上内核的支持，当然也是可以使用2.6的内核，当时可能会出现不可控制的问题，所以需要我们升级内核版本。")]),e._v(" "),s("p",[e._v("要升级内核OS到3.1以上，需要以下几个步骤。")]),e._v(" "),s("h2",{attrs:{id:"一、安装elrepo的yum源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、安装elrepo的yum源","aria-hidden":"true"}},[e._v("#")]),e._v(" 一、安装elrepo的yum源")]),e._v(" "),s("p",[e._v("升级内核需要使用elrepo的yum源，在安装yum源之前还需要我们导入elrepo的key，如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n\nrpm -Uvh http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("elrepo的key安装完毕后，我们下面开始正式升级内核。")]),e._v(" "),s("h2",{attrs:{id:"二、升级内核"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、升级内核","aria-hidden":"true"}},[e._v("#")]),e._v(" 二、升级内核")]),e._v(" "),s("p",[e._v("在yum的elrepo源中有ml和lt两种内核，其中ml(mainline)为最新版本的内核，lt为长期支持的内核。")]),e._v(" "),s("p",[e._v("如果要安装ml内核，使用如下命令：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum --enablerepo=elrepo-kernel -y install kernel-ml\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("如果要安装lt内核，使用如下命令：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("yum --enablerepo=elrepo-kernel -y install kernel-lt\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("在此我们安装的是lt内核，如下：\n"),s("img",{attrs:{src:"https://img.hacpai.com/file/2019/03/image-92715945.png",alt:"image.png"}})]),e._v(" "),s("p",[e._v("内核升级完毕后，不会立即生效，还需要我们修改grub.conf文件。")]),e._v(" "),s("h2",{attrs:{id:"三、修改grub-conf文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、修改grub-conf文件","aria-hidden":"true"}},[e._v("#")]),e._v(" 三、修改grub.conf文件")]),e._v(" "),s("p",[e._v("内核升级完毕后，需要我们修改内核的启动顺序，默认启动的顺序应该为1,升级以后内核是往前面插入为0，如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("vim /etc/grub.conf\n\ndefault=0\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://img.hacpai.com/file/2019/03/image-1d261314.png",alt:"image.png"}})]),e._v(" "),s("h2",{attrs:{id:"四、重启系统并查看系统内核"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、重启系统并查看系统内核","aria-hidden":"true"}},[e._v("#")]),e._v(" 四、重启系统并查看系统内核")]),e._v(" "),s("p",[e._v("grub.conf文件修改完毕后，还需要重启系统，如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("shutdown -r now\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])},[],!1,null,null,null);a.default=t.exports}}]);